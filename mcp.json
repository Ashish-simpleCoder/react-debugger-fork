{
  "mcpServers": {
    "react-debugger": {
      "command": "npx",
      "args": ["@react-debugger/core", "--mcp-server"],
      "env": { "NODE_ENV": "development" },
      "description": "React Runtime Debugger MCP server. Subscription-first with commit/findings/snapshot/control channels. data-debug-id is dev-only fallback.",
      "capabilities": { "tools": { "listChanged": true } },
      "metadata": {
        "version": "0.2.0",
        "author": "React Debugger Team",
        "repository": "https://github.com/reillyjodonnell/react-debugger",
        "documentation": "https://github.com/reillyjodonnell/react-debugger/blob/main/README.md"
      },
      "tools": [
        {
          "name": "subscribe",
          "description": "Subscribe to component changes",
          "inputSchema": {
            "type": "object",
            "properties": {
              "fields": {
                "type": "object",
                "description": "Projection for props/state/context in snapshots.",
                "properties": {
                  "props": {
                    "type": "array",
                    "items": { "type": "string" },
                    "description": "Prop keys to include. Use [\"*\"] for all."
                  },
                  "state": {
                    "type": "array",
                    "items": { "type": "string" },
                    "description": "Hooks state keys are index-based: state#0, state#1, ref#0, etc. Use [\"*\"] for all."
                  },
                  "context": {
                    "type": "array",
                    "items": { "type": "string" },
                    "description": "Context keys to include (by display name). Use [\"*\"] for all."
                  }
                }
              }
            }
          }
        },
        {
          "name": "nextEvents",
          "title": "Drain subscription events",
          "description": "Return and remove queued events for a subscription",
          "inputSchema": {
            "type": "object",
            "properties": {
              "subscriptionId": { "type": "string" },
              "max": {
                "type": "number",
                "description": "Max events to drain (default 100)"
              }
            },
            "required": ["subscriptionId"]
          }
        },
        {
          "name": "unsubscribe",
          "title": "Cancel a subscription",
          "description": "Stop a subscription by ID",
          "inputSchema": {
            "type": "object",
            "properties": { "subscriptionId": { "type": "string" } },
            "required": ["subscriptionId"]
          }
        },
        {
          "name": "getProps",
          "title": "Deref props",
          "description": "Fetch props at paths for a fiber and commit",
          "inputSchema": {
            "type": "object",
            "properties": {
              "fid": { "type": "string" },
              "commitId": {
                "type": "number",
                "description": "If omitted, the latest known commit is used."
              },
              "paths": { "type": "array", "items": { "type": "string" } }
            },
            "required": ["fid", "paths"]
          }
        },
        {
          "name": "getHooksState",
          "title": "Deref hooks state",
          "description": "Fetch hooks state for a fiber at specific paths. NOTE: React does not expose variable names; hooks are identified by index/type (e.g., state#0, state#1, ref#0).",
          "inputSchema": {
            "type": "object",
            "properties": {
              "fid": { "type": "string" },
              "commitId": {
                "type": "number",
                "description": "If omitted, the latest known commit is used."
              },
              "paths": {
                "type": "array",
                "items": { "type": "string" },
                "description": "One or more hook keys (e.g., [\"state#0\"], [\"ref#0\"]) or [\"*\"] to return all hooks."
              }
            },
            "required": ["fid", "paths"]
          }
        },
        {
          "name": "ping",
          "title": "Health check",
          "description": "Basic health check for the MCP server",
          "inputSchema": { "type": "object", "properties": {} }
        }
      ],
      "requirements": {
        "runtime": "bun",
        "minimumVersion": "1.0.0",
        "dependencies": ["react"],
        "setup": [
          "1) Add the MCP agent to your app (dev only)",
          "2) Start this server; it exposes ws://localhost:5679",
          "3) Use subscribe() with selectors; avoid data-debug-id except as fallback"
        ]
      }
    }
  }
}
